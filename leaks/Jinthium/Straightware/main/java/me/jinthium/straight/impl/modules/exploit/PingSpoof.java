package me.jinthium.straight.impl.modules.exploit;


import io.mxngo.echo.Callback;
import io.mxngo.echo.EventCallback;
import me.jinthium.straight.api.module.Module;
import me.jinthium.straight.impl.components.BadPacketsComponent;
import me.jinthium.straight.impl.components.PingSpoofComponent;
import me.jinthium.straight.impl.event.movement.PlayerUpdateEvent;
import me.jinthium.straight.impl.settings.NumberSetting;
import me.jinthium.straight.impl.utils.misc.TimerUtil;

public class PingSpoof extends Module {

    private final NumberSetting delay = new NumberSetting("Delay", 150, 0, 5000, 1);
    private final TimerUtil timerUtil = new TimerUtil();

    public PingSpoof(){
        super("PingSpoof", Category.EXPLOIT);
        this.addSettings(delay);
    }

    @Callback
    final EventCallback<PlayerUpdateEvent> playerUpdateEventCallback = event -> {
        if(event.isPre()){
            if(BadPacketsComponent.bad(false, true, true, true, true))
                return;

            PingSpoofComponent.setSpoofing(delay.getValue().intValue(), true, false, false, false, false);
        }
    };
}
