/*
 * Decompiled with CFR 0.152.
 */
package wtf.monsoon.impl.module.exploit;

import io.github.nevalackin.homoBus.Listener;
import io.github.nevalackin.homoBus.annotations.EventLink;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;
import wtf.monsoon.api.module.Category;
import wtf.monsoon.api.module.Module;
import wtf.monsoon.api.setting.Setting;
import wtf.monsoon.api.util.misc.PacketSleepThread;
import wtf.monsoon.impl.event.EventPacket;

public class PingSpoof
extends Module {
    private final Setting<Double> ping = new Setting<Double>("Ping", 100.0).minimum(20.0).maximum(1000.0).incrementation(1.0).describedBy("Your ping");
    @EventLink
    private final Listener<EventPacket> eventPacketListener = e -> {
        if (e.getDirection().equals((Object)EventPacket.Direction.SEND) && (e.getPacket() instanceof C00PacketKeepAlive || e.getPacket() instanceof C0FPacketConfirmTransaction)) {
            e.setCancelled(true);
            new PacketSleepThread(e.getPacket(), this.ping.getValue().longValue()).start();
        }
    };

    public PingSpoof() {
        super("Ping Spoof", "Spoof your ping", Category.EXPLOIT);
        this.setMetadata(() -> String.valueOf(this.ping.getValue()));
    }

    public Setting<Double> getPing() {
        return this.ping;
    }
}

