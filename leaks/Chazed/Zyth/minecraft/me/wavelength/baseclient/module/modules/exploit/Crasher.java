package me.wavelength.baseclient.module.modules.exploit;

import java.util.Iterator;

import org.apache.commons.lang3.RandomUtils;
import org.lwjgl.input.Keyboard;

import me.wavelength.baseclient.event.events.UpdateEvent;
import me.wavelength.baseclient.module.AntiCheat;
import me.wavelength.baseclient.module.Category;
import me.wavelength.baseclient.module.Module;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.entity.Entity;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.item.ItemBook;
import net.minecraft.item.ItemStack;
import net.minecraft.item.ItemSword;
import net.minecraft.network.play.client.C02PacketUseEntity;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C03PacketPlayer.C04PacketPlayerPosition;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.network.play.client.C0EPacketClickWindow;
import net.minecraft.network.play.client.C10PacketCreativeInventoryAction;
import net.minecraft.network.play.client.C02PacketUseEntity.Action;

public class Crasher extends Module {

    public Crasher() {
        super("Crasher", "Crashes because funny", 0, Category.EXPLOIT, AntiCheat.VANILLA, AntiCheat.MMC);
    }

    private int jumped;
    private double y;
    
    
    public void onUpdate(UpdateEvent event) {
    	if(this.antiCheat == AntiCheat.VANILLA) {
    		mc.timer.timerSpeed = 1000000;
    		if(mc.thePlayer.onGround)
    			mc.thePlayer.jump();
    	}
    	
    	if(this.antiCheat == AntiCheat.MMC) {
    			
    		//Define the entity.
            for(Iterator<Entity> entities = mc.theWorld.loadedEntityList.iterator(); entities.hasNext();) {
                Object theObject = entities.next();
                if(theObject instanceof EntityLivingBase) {
                    EntityLivingBase entity = (EntityLivingBase) theObject;
                    if(entity instanceof EntityPlayerSP) continue;
                    
                    if(!entity.isInvisibleToPlayer(mc.thePlayer)) {
                    	
            				if(mc.thePlayer.getDistanceToEntity(entity) <= 5) {
            			        for(int i = 0; i < 50; i++) {
                                    mc.thePlayer.sendQueue.addToSendQueue(new C02PacketUseEntity(entity, Action.INTERACT));
            			        }
                                mc.thePlayer.sendQueue.addToSendQueue(new C02PacketUseEntity(entity, Action.INTERACT));
            			}

                    }
                }
            }
    	}
    }

    public void onDisable() {
    	mc.timer.timerSpeed = 1;
    }

    @Override
    public void onEnable() {
        jumped = 0;
        y = mc.thePlayer.posY;
        super.onEnable();
    }
}